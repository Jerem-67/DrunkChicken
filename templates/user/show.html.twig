{% extends 'base.html.twig' %}

{% block title %}User{% endblock %}

{% block body %}
    <section id="profil" class="uk-container uk-margin">
        <div class="uk-child-width-1-2@m" uk-grid>
            <div class="uk-card uk-card-default">
                <div class="uk-card-body">
                    <h3 class="uk-card-title">{{ user.sex ? 'Mr' : 'Mrs' }} {{ user.firstName }} {{ user.name }} </h3>
                    <p class="uk-text-meta uk-margin-remove-top">Birthday
                        : {{ user.birthday ? user.birthday|date('d F Y') : '' }}</p>
                    <div class="uk-card-body">
                        <h1>Vaccines</h1>
                        <ul>
                            {% if age.y < 18 %}
                                <li>Go to your Doctor</li>
                            {% elseif age.y <= 65 %}
                                <li>DTP last check : {{ user.dtp ? user.dtp|date('d F Y') : '' }}</li>
                                <li>DTP next check
                                    : {{ user.dtp ? user.dtp|date_modify("+5 years")|date('d F Y') : '' }}</li>
                                <hr>
                                <li>Coqueluche last check
                                    : {{ user.coqueluche ? user.coqueluche|date('d F Y') : '' }}</li>
                                <li>Coqueluche next check
                                    : {{ user.coqueluche ? user.coqueluche|date_modify("+5 years")|date('d F Y') : '' }}</li>
                                <hr>
                                <li>Grippe last check : {{ user.grippe ? user.grippe|date('d F Y') : '' }}</li>
                                <li>Grippe next check
                                    : {{ user.grippe ? user.grippe|date_modify("+5 years")|date('d F Y') : '' }}</li>
                                <hr>
                                <li>Zona last check : {{ user.zona ? user.zona|date('d F Y') : '' }}</li>
                                <li>Zona next check
                                    : {{ user.zona ? user.zona|date_modify("+5 years")|date('d F Y') : '' }}</li>
                                <hr>
                            {% else %}
                                <li>DTP last check : {{ user.dtp ? user.dtp|date('d F Y') : '' }}</li>
                                <li>DTP next check
                                    : {{ user.dtp ? user.dtp|date_modify("+1 years")|date('d F Y') : '' }}</li>
                                <hr>
                                <li>Coqueluche last check
                                    : {{ user.coqueluche ? user.coqueluche|date('d F Y') : '' }}</li>
                                <li>Coqueluche next check
                                    : {{ user.coqueluche ? user.coqueluche|date_modify("+1 years")|date('d F Y') : '' }}</li>
                                <hr>
                                <li>Grippe last check : {{ user.grippe ? user.grippe|date('d F Y') : '' }}</li>
                                <li>Grippe next check
                                    : {{ user.grippe ? user.grippe|date_modify("+1 years")|date('d F Y') : '' }}</li>
                                <hr>
                                <li>Zona last check : {{ user.zona ? user.zona|date('d F Y') : '' }}</li>
                                <li>Zona next check
                                    : {{ user.zona ? user.zona|date_modify("+1 years")|date('d F Y') : '' }}</li>
                            {% endif %}
                        </ul>
                        <a href="{{ path('user_edit', {'id': user.id}) }}" class="uk-button uk-button-text">edit</a>
                    </div>
                </div>
            </div>
            <div>
                <div class="uk-card uk-card-default">
                    <div class="uk-card-body">
                        <h3 class="uk-card-title">Your Family</h3>
                        {% for child in user.children %}
                        <ul uk-accordion>
                            <li class="uk-close">
                                <a class="uk-accordion-title"
                                   href="{{ path('child_show', {'id': child.id}) }}">{{ child.firstname }}'s birthday
                                    : {{ child.birthday ? child.birthday|date('d F Y') : '' }}</a>
                                <div class="uk-accordion-content">
                                    <h1>Vaccines</h1>
                                    <ul>
                                        <li>Tuberculose check
                                            : {{ child.birthday ? child.birthday|date_modify("+1 month")|date('d F Y') : '' }}</li>
                                        <hr>
                                        <li>DTP First check
                                            : {{ child.birthday ? child.birthday|date_modify("+2 month")|date('d F Y') : '' }}</li>
                                        <li>DTP Second check
                                            : {{ child.birthday ? child.birthday|date_modify("+4 month")|date('d F Y') : '' }}</li>
                                        <li>DTP Third check
                                            : {{ child.birthday ? child.birthday|date_modify("+11 month")|date('d F Y') : '' }}</li>
                                        <hr>
                                        <li>Coqueluche First check
                                            : {{ child.birthday ? child.birthday|date_modify("+2 month")|date('d F Y') : '' }}</li>
                                        <li>Coqueluche Second check
                                            : {{ child.birthday ? child.birthday|date_modify("+4 month")|date('d F Y') : '' }}</li>
                                        <li>Coqueluche Third check
                                            : {{ child.birthday ? child.birthday|date_modify("+11 month")|date('d F Y') : '' }}</li>
                                        <hr>
                                        <li>HepatiteB First check
                                            : {{ child.birthday ? child.birthday|date_modify("+2 month")|date('d F Y') : '' }}</li>
                                        <li>HepatiteB Second check
                                            : {{ child.birthday ? child.birthday|date_modify("+4 month")|date('d F Y') : '' }}</li>
                                        <li>HepatiteB Third check
                                            : {{ child.birthday ? child.birthday|date_modify("+11 month")|date('d F Y') : '' }}</li>
                                        <hr>
                                        <li>RoR First check
                                            : {{ child.birthday ? child.birthday|date_modify("+12 month")|date('d F Y') : '' }}</li>
                                        <li>RoR Second check
                                            : {{ child.birthday ? child.birthday|date_modify("+18 month")|date('d F Y') : '' }}</li>
                                        <hr>
                                        <li>Meningites First check
                                            : {{ child.birthday ? child.birthday|date_modify("+5 month")|date('d F Y') : '' }}</li>
                                        <li>Meningites Second check
                                            : {{ child.birthday ? child.birthday|date_modify("+12 month")|date('d F Y') : '' }}</li>
                                        <hr>
                                        {% if child.sex ? child.sex == true %}
                                            <li>HPV check
                                                : {{ child.birthday ? child.birthday|date_modify("+12 years")|date('d F Y') : '' }}</li>
                                        {% endif %}
                                    </ul>
                                </div>
                            </li>
                        </ul>
                        <li>
                            <a href="{{ path('child_edit', {'id': child.id}) }}" class="uk-button uk-button-text">{{ child.firstname }}  Edit</a>
                        </li>
                        {% endfor %}
                        <div class="uk-width-expand">
                            <div class="uk-card-footer">
                                <a href="{{ path('child_new') }}" class="uk-button uk-button-text">Add child</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}
